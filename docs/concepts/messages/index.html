<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Sending and Receiving Messages · ChatEngine</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Messages are always sent on a channel. You can send any data (a string, JSON data, or an object), as long as the data size is below 32 KiB.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Sending and Receiving Messages · ChatEngine"/><meta property="og:type" content="website"/><meta property="og:url" content="https://pubnub.github.io/chatengine/"/><meta property="og:description" content="&lt;p&gt;Messages are always sent on a channel. You can send any data (a string, JSON data, or an object), as long as the data size is below 32 KiB.&lt;/p&gt;
"/><meta property="og:image" content="https://pubnub.github.io/chatengine/img/chat-engine-logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://pubnub.github.io/chatengine/img/chat-engine-logo.png"/><link rel="shortcut icon" href="/chatengine/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/ir-black.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/chat-resource-center/js/language-picker.js"></script><script type="text/javascript" src="/chat-resource-center/js/segment.js"></script><link rel="stylesheet" href="/chatengine/css/main.css"/><script src="/chatengine/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/chatengine/"><img class="logo" src="/chatengine/img/pubnub.svg" alt="ChatEngine"/><h2 class="headerTitleWithLogo">ChatEngine</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/chatengine/docs/overview" target="_self">Documentation</a></li><li class="siteNavGroupActive"><a href="/chatengine/docs/overview" target="_self">Developers</a></li><li class="siteNavGroupActive"><a href="/chatengine/docs/overview" target="_self">SDKs</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search...." title="Search...."/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Concepts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Overview<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/chatengine/docs/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/users">Users</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/channels">Channels</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/messages">Messages</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/security">Security</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/functions">Functions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/chatengine/docs/tutorials/tutorial-javascript">JavaScript</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/tutorials/tutorial-swift">Swift</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/tutorials/tutorial-android">Android</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/chatengine/docs/concepts/connecting">Connect to PubNub</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/concepts/channels">Manage Channels</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/chatengine/docs/concepts/messages">Messages</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/concepts/message-history">Message History</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/concepts/presence">Presence</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/concepts/authentication">P2: Authentication</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/concepts/authorization">Authorization</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/concepts/push-notifications">Push Notifications</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/concepts/encryption">Encryption</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/concepts/admin-controls">P2: Admin Controls</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Phase 2: Best Practices<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/chatengine/docs/best-practices/best-practices">P2: Best Practices Overview</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/best-practices/chatbot-integration">P2: Chatbot Integration</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/best-practices/translation">P2: Language Translation</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/best-practices/moderation">P2: Content Moderation</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/best-practices/storage">P2: Store Messages Externally</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/best-practices/high-occupancy-channels">P2: High Occupancy Events</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/best-practices/friend-lists">P2: Friend Lists</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/best-practices/rate-limiting">P2: Rate Limiting</a></li><li class="navListItem"><a class="navItem" href="/chatengine/docs/best-practices/location-tracking">P2: Location Tracking</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/chatengine/docs/resources/resources">Reference</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/pubnub/chat-resource-center/edit/master/docs/concepts/messages.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Sending and Receiving Messages</h1></header><article><div><span><p>Messages are always sent on a channel. You can send any data (a string, JSON data, or an object), as long as the data size is below 32 KiB.</p>
<h2><a class="anchor" aria-hidden="true" id="sending-messages"></a><a href="#sending-messages" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sending messages</h2>
<p>The <code>publish()</code> method allows you to send messages on a channel.</p>
<p>PubNub does not include sender details in the message by default. It is recommended to add sender details (ID, name etc.) in the message body before sending the message so the details can be displayed in the application next to each message.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-149-tab-150" class="nav-link active" data-group="group_149" data-tab="tab-group-149-content-150">JavaScript</div><div id="tab-group-149-tab-151" class="nav-link" data-group="group_149" data-tab="tab-group-149-content-151">Swift</div><div id="tab-group-149-tab-152" class="nav-link" data-group="group_149" data-tab="tab-group-149-content-152">Java</div></div><div class="tab-content"><div id="tab-group-149-content-150" class="tab-pane active" data-group="group_149" tabindex="-1"><div><span><pre><code class="hljs css language-js">pubnub.publish({<br />  <span class="hljs-attr">message</span>: {<br />    <span class="hljs-attr">senderId</span>: <span class="hljs-string">'user123'</span>,<br />    <span class="hljs-attr">text</span>: <span class="hljs-string">'Hello, hoomans!'</span>,<br />  },<br />  <span class="hljs-attr">channel</span>: <span class="hljs-string">'room-1'</span>,<br />}, (status, response) =&gt; {<br />  <span class="hljs-comment">// handle status, response</span><br />});<br /></code></pre>
</span></div></div><div id="tab-group-149-content-151" class="tab-pane" data-group="group_149" tabindex="-1"><div><span><pre><code class="hljs css language-swift">pubnub.publish()<br />  .message([<br />    <span class="hljs-string">"senderId"</span>: <span class="hljs-string">"user123"</span>,<br />    <span class="hljs-string">"text"</span>: <span class="hljs-string">"Hello, hoomans!"</span><br />  ])<br />  .channel(<span class="hljs-string">"room-1"</span>)<br />  .performWithCompletion({ status <span class="hljs-keyword">in</span><br />    <span class="hljs-comment">// handle status</span><br />  })<br /></code></pre>
</span></div></div><div id="tab-group-149-content-152" class="tab-pane" data-group="group_149" tabindex="-1"><div><span><pre><code class="hljs css language-java"><span class="hljs-keyword">package</span> chatresourcecenter;<br /><br /><span class="hljs-keyword">import</span> com.google.gson.JsonObject;<br /><span class="hljs-keyword">import</span> com.pubnub.api.callbacks.PNCallback;<br /><span class="hljs-keyword">import</span> com.pubnub.api.models.consumer.PNPublishResult;<br /><span class="hljs-keyword">import</span> com.pubnub.api.models.consumer.PNStatus;<br /><br /><span class="hljs-keyword">import</span> org.awaitility.Awaitility;<br /><span class="hljs-keyword">import</span> org.junit.Test;<br /><br /><span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;<br /><span class="hljs-keyword">import</span> java.util.concurrent.atomic.AtomicBoolean;<br /><br /><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.junit.Assert.assertFalse;<br /><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.junit.Assert.assertNotNull;<br /><br /><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessagesTest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">TestHarness</span> </span>{<br /><br /><span class="hljs-meta">@Test</span><br /><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSendMessage</span><span class="hljs-params">()</span> </span>{<br />    <span class="hljs-keyword">final</span> AtomicBoolean messageSendSuccess = <span class="hljs-keyword">new</span> AtomicBoolean(<span class="hljs-keyword">false</span>);<br /><br />    JsonObject message = <span class="hljs-keyword">new</span> JsonObject();<br />    message.addProperty(<span class="hljs-string">"senderId"</span>, <span class="hljs-string">"user123"</span>);<br />    message.addProperty(<span class="hljs-string">"text"</span>, <span class="hljs-string">"hello"</span>);<br /><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="receiving-messages"></a><a href="#receiving-messages" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Receiving messages</h2>
<p>You are also notified of message events on subscribed channels, connectivity status and presence notifications via listeners.</p>
<p>Listeners should be added before calling the <code>subscribe</code> method.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-153-tab-154" class="nav-link active" data-group="group_153" data-tab="tab-group-153-content-154">JavaScript</div><div id="tab-group-153-tab-155" class="nav-link" data-group="group_153" data-tab="tab-group-153-content-155">Swift</div><div id="tab-group-153-tab-156" class="nav-link" data-group="group_153" data-tab="tab-group-153-content-156">Java</div></div><div class="tab-content"><div id="tab-group-153-content-154" class="tab-pane active" data-group="group_153" tabindex="-1"><div><span><pre><code class="hljs css language-js">pubnub.addListener({<br />  <span class="hljs-attr">message</span>: <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> {<br />    <span class="hljs-comment">// handle message</span><br />    <span class="hljs-comment">// the channel for which the message belongs</span><br />    <span class="hljs-keyword">const</span> channelName = message.channel;<br />    <span class="hljs-comment">// the channel group or wildcard subscription match (if exists)</span><br />    <span class="hljs-keyword">const</span> channelGroup = message.subscription;<br />    <span class="hljs-comment">// publish timetoken</span><br />    <span class="hljs-keyword">const</span> publishTimetoken = message.timetoken;<br />    <span class="hljs-comment">// the payload</span><br />    <span class="hljs-keyword">const</span> msg = message.message;<br />    <span class="hljs-comment">// the publisher</span><br />    <span class="hljs-keyword">const</span> publisher = message.publisher;<br />  },<br />  <span class="hljs-attr">presence</span>: <span class="hljs-function">(<span class="hljs-params">presence</span>) =&gt;</span> {<br />    <span class="hljs-comment">// handle presence</span><br />    <span class="hljs-comment">// the channel for which the message belongs</span><br />    <span class="hljs-keyword">const</span> channelName = presence.channel;<br />    <span class="hljs-comment">// the channel group or wildcard subscription match (if exists)</span><br />    <span class="hljs-keyword">const</span> channelGroup = presence.subscription;<br />    <span class="hljs-comment">// can be join, leave, state-change, interval or timeout</span><br />    <span class="hljs-keyword">const</span> action = presence.action;<br />    <span class="hljs-comment">// no. of users connected with the channel</span><br />    <span class="hljs-keyword">const</span> occupancy = presence.occupancy;<br />    <span class="hljs-comment">// user state</span><br />    <span class="hljs-keyword">const</span> state = presence.state;<br />    <span class="hljs-comment">// event timetoken</span><br />    <span class="hljs-keyword">const</span> timestamp = presence.timestamp;<br />    <span class="hljs-comment">// UUID of users who are connected with the channel</span><br />    <span class="hljs-keyword">const</span> uuid = presence.uuid;<br />  },<br />  <span class="hljs-attr">status</span>: <span class="hljs-function">(<span class="hljs-params">status</span>) =&gt;</span> {<br />    <span class="hljs-comment">// handle status change</span><br />    <span class="hljs-comment">// channels for which updated client state received</span><br />    <span class="hljs-keyword">const</span> channels = status.affectedChannels;<br />    <span class="hljs-comment">// channel groups or wildcard subscription match (if exists)</span><br />    <span class="hljs-keyword">const</span> channelGroups = status.affectedChannelGroups;<br />    <span class="hljs-comment">// name of operation for which status update available</span><br />    <span class="hljs-keyword">const</span> operation = status.operation;<br />    <span class="hljs-comment">// operation result category</span><br />    <span class="hljs-keyword">const</span> category = status.category;<br />  },<br />});<br /></code></pre>
</span></div></div><div id="tab-group-153-content-155" class="tab-pane" data-group="group_153" tabindex="-1"><div><span><pre><code class="hljs css language-swift"><span class="hljs-comment">// Add 'PNObjectEventListener' protocol to class which would like to receive updates.</span><br /><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PNTestCase</span>: <span class="hljs-title">XCTestCase</span>, <span class="hljs-title">PNObjectEventListener</span> </span>{<br /> <br />  <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">client</span><span class="hljs-params">(<span class="hljs-number">_</span> client: PubNub, didReceiveMessage<br />              message: PNMessageResult)</span></span> {<br /> <br />    <span class="hljs-comment">// handle message</span><br />    <span class="hljs-comment">// the channel for which the message belongs</span><br />    <span class="hljs-keyword">let</span> channelName = message.data.channel;<br />    <span class="hljs-comment">// the channel group or wildcard subscription match (if exists)</span><br />    <span class="hljs-keyword">let</span> channelGroup = message.data.subscription;<br />    <span class="hljs-comment">// publish timetoken</span><br />    <span class="hljs-keyword">let</span> publishTimetoken = message.data.timetoken;<br />    <span class="hljs-comment">// the payload</span><br />    <span class="hljs-keyword">let</span> msg = message.data.message;<br />    <span class="hljs-comment">// the publisher</span><br />    <span class="hljs-keyword">let</span> publisher = message.data.publisher;<br />  }<br /><br />  <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">client</span><span class="hljs-params">(<span class="hljs-number">_</span> client: PubNub,<br />              didReceivePresenceEvent event: PNPresenceEventResult)</span></span> {<br /> <br />    <span class="hljs-comment">// handle presence</span><br />    <span class="hljs-comment">// the channel for which the message belongs</span><br />    <span class="hljs-keyword">let</span> channelName = event.data.channel;<br />    <span class="hljs-comment">// the channel group or wildcard subscription match (if exists)</span><br />    <span class="hljs-keyword">let</span> channelGroup = event.data.subscription;<br />    <span class="hljs-comment">// can be join, leave, state-change, interval or timeout</span><br />    <span class="hljs-keyword">let</span> action = event.data.presenceEvent;<br />    <span class="hljs-comment">// no. of users connected with the channel</span><br />    <span class="hljs-keyword">let</span> occupancy = event.data.presence.occupancy;<br />    <span class="hljs-comment">// user state</span><br />    <span class="hljs-keyword">let</span> state = event.data.presence.state;<br />    <span class="hljs-comment">// event timetoken</span><br />    <span class="hljs-keyword">let</span> timetoken = event.data.presence.timetoken;<br />    <span class="hljs-comment">// UUID of users who are connected with the channel</span><br />    <span class="hljs-keyword">let</span> uuid = event.data.presence.uuid;<br />  }<br /><br />  <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">client</span><span class="hljs-params">(<span class="hljs-number">_</span> client: PubNub,<br />              didReceive status: PNStatus)</span></span> {<br /> <br />    <span class="hljs-comment">// handle status change</span><br />    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> subscribeStatus = status <span class="hljs-keyword">as</span>? <span class="hljs-type">PNSubscribeStatus</span> {<br />      <span class="hljs-comment">// channels for which updated client state received</span><br />      <span class="hljs-keyword">let</span> channels = subscribeStatus.subscribedChannels;<br />      <span class="hljs-comment">// channel groups or wildcard subscription match (if exists)</span><br />      <span class="hljs-keyword">let</span> channelGroups = subscribeStatus.subscribedChannelGroups;<br />    }<br /> <br />    <span class="hljs-comment">// name of operation for which status update available</span><br />    <span class="hljs-keyword">let</span> operation = status.operation;<br />    <span class="hljs-comment">// operation result category</span><br />    <span class="hljs-keyword">let</span> category = status.category;<br />  }<br />}<br /> <br /><span class="hljs-comment">/**<br /> * When PubNub client will be ready, add class which adopt 'PNObjectEventListener'<br /> * protocol as listener.<br /> */</span><br />pubnub.addListener(<span class="hljs-keyword">self</span>)<br /></code></pre>
</span></div></div><div id="tab-group-153-content-156" class="tab-pane" data-group="group_153" tabindex="-1"><div><span><pre><code class="hljs css language-java"><span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> need a sample here</span><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="sending-images-and-files"></a><a href="#sending-images-and-files" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sending images and files</h2>
<blockquote>
<p><strong>This is a medium priority item for phase 1</strong></p>
</blockquote>
<p>The <code>publish</code> method allows you to send messages up to 32 KiB, so if the file is small enough, you can encode a binary file in base64 format and publish the data as usual.</p>
<p>When the file size is above 32 KiB, you need to provide your own storage servers. You can store the binary files in a database such as Amazon S3, or other cloud storage services or on a CDN then send the URL and a thumbnail image over PubNub.</p>
<p>You can calculate your message size before sending to PubNub in order to prevent &quot;Message Too Large&quot; gateway responses.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-157-tab-158" class="nav-link active" data-group="group_157" data-tab="tab-group-157-content-158">JavaScript</div><div id="tab-group-157-tab-159" class="nav-link" data-group="group_157" data-tab="tab-group-157-content-159">Swift</div><div id="tab-group-157-tab-160" class="nav-link" data-group="group_157" data-tab="tab-group-157-content-160">Java</div></div><div class="tab-content"><div id="tab-group-157-content-158" class="tab-pane active" data-group="group_157" tabindex="-1"><div><span><pre><code class="hljs css language-js"><span class="hljs-comment">// Calculating a PubNub Message Payload Size</span><br /><span class="hljs-keyword">const</span> payloadSize = <span class="hljs-function">(<span class="hljs-params">channel, message</span>) =&gt;</span> {<br />  <span class="hljs-keyword">const</span> payload = <span class="hljs-built_in">JSON</span>.stringify(message);<br />  <span class="hljs-keyword">const</span> encodedPayload = <span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-string">`<span class="hljs-subst">${channel}</span>/<span class="hljs-subst">${payload}</span>`</span>);<br /><br />  <span class="hljs-keyword">return</span> encodedPayload.length + <span class="hljs-number">150</span>; <span class="hljs-comment">// 150 is length of publish API prefix.</span><br />};<br /><br /><span class="hljs-keyword">const</span> channel = <span class="hljs-string">'room-1'</span>;<br /><span class="hljs-keyword">const</span> message = { <span class="hljs-attr">senderId</span>: <span class="hljs-string">'user123'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'Hello World'</span> };<br /><span class="hljs-keyword">const</span> size = payloadSize(channel, message);<br /><span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Payload Size:'</span>, size);<br /></code></pre>
</span></div></div><div id="tab-group-157-content-159" class="tab-pane" data-group="group_157" tabindex="-1"><div><span><pre><code class="hljs css language-swift"><span class="hljs-keyword">let</span> channel = <span class="hljs-string">"room-1"</span><br /><span class="hljs-keyword">let</span> message = [<span class="hljs-string">"senderId"</span>: <span class="hljs-string">"user123"</span>, <span class="hljs-string">"text"</span>: <span class="hljs-string">"Hello World"</span>]<br /><br />pubnub.size()<br />  .channel(channel)<br />  .message(message)<br />  .performWithCompletion({ size <span class="hljs-keyword">in</span><br />    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Payload Size: \(size)"</span>)<br />  })<br /></code></pre>
</span></div></div><div id="tab-group-157-content-160" class="tab-pane" data-group="group_157" tabindex="-1"><div><span><pre><code class="hljs css language-java"><span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> need a sample here</span><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="sending-typing-indicators"></a><a href="#sending-typing-indicators" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sending typing indicators</h2>
<blockquote>
<p><strong>This is a medium priority item for phase 1</strong></p>
</blockquote>
<p>Most applications display typing indicators if there is text entered in the text box, whether you’re actively typing or not. So for example, if you type out something on the keyboard and then stop typing, the typing bubbles will still appear on your recipient’s screen until you send the text to them or completely erase the text from the text box.</p>
<p>You can build this functionality by listening to DOM events like <code>keydown</code> or <code>keypress</code> for a chat text field, and when the event is triggered, send a message like <code>{isTyping : true}</code>, then toggle it back to <code>false</code> as the user clears the text, and notify all other subscribers on the channel.</p>
<p>Since it is not useful to store these events in storage, you can send them with message storage disabled.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-161-tab-162" class="nav-link active" data-group="group_161" data-tab="tab-group-161-content-162">JavaScript</div><div id="tab-group-161-tab-163" class="nav-link" data-group="group_161" data-tab="tab-group-161-content-163">Swift</div><div id="tab-group-161-tab-164" class="nav-link" data-group="group_161" data-tab="tab-group-161-content-164">Java</div></div><div class="tab-content"><div id="tab-group-161-content-162" class="tab-pane active" data-group="group_161" tabindex="-1"><div><span><pre><code class="hljs css language-js">pubnub.publish({<br />  <span class="hljs-attr">message</span>: {<br />    <span class="hljs-attr">senderId</span>: <span class="hljs-string">'user123'</span>,<br />    <span class="hljs-attr">isTyping</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// indicates typing</span><br />  },<br />  <span class="hljs-attr">channel</span>: <span class="hljs-string">'room-1'</span>,<br />  <span class="hljs-attr">storeInHistory</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// override default storage options</span><br />}, (status, response) =&gt; {<br />  <span class="hljs-comment">// handle status, response</span><br />});<br /></code></pre>
</span></div></div><div id="tab-group-161-content-163" class="tab-pane" data-group="group_161" tabindex="-1"><div><span><pre><code class="hljs css language-swift">pubnub.publish()<br />  .message([<br />    <span class="hljs-string">"senderId"</span>: <span class="hljs-string">"user123"</span>,<br />    <span class="hljs-string">"isTyping"</span>: <span class="hljs-literal">true</span><br />  ])<br />  .channel(<span class="hljs-string">"room-1"</span>)<br />  .shouldStore(<span class="hljs-literal">false</span>)<br />  .performWithCompletion({ status <span class="hljs-keyword">in</span><br />    <span class="hljs-comment">// handle status</span><br />  })<br /></code></pre>
</span></div></div><div id="tab-group-161-content-164" class="tab-pane" data-group="group_161" tabindex="-1"><div><span><pre><code class="hljs css language-java"><span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> need a sample here</span><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="showing-timestamp-in-the-message"></a><a href="#showing-timestamp-in-the-message" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Showing timestamp in the message</h2>
<blockquote>
<p><strong>This is a medium priority item for phase 1</strong>.</p>
</blockquote>
<p>The subscribe listener returns an envelope that contains a 17-digit precision Unix time (UTC). To convert the timestamp to a UNIX timestamp, divide it by 10,000,000. or directly from 17-digit precision time without converting to UNIX time. The format of <code>localeDateTime</code> is something similar to <code>7/5/2015, 3:58:43 PM</code>.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-165-tab-166" class="nav-link active" data-group="group_165" data-tab="tab-group-165-content-166">JavaScript</div><div id="tab-group-165-tab-167" class="nav-link" data-group="group_165" data-tab="tab-group-165-content-167">Swift</div><div id="tab-group-165-tab-168" class="nav-link" data-group="group_165" data-tab="tab-group-165-content-168">Java</div></div><div class="tab-content"><div id="tab-group-165-content-166" class="tab-pane active" data-group="group_165" tabindex="-1"><div><span><pre><code class="hljs css language-js">pubnub.addListener({<br />  <span class="hljs-attr">message</span>: <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> {<br />    <span class="hljs-keyword">const</span> unixTimestamp = message.timetoken / <span class="hljs-number">10000000</span>;<br />    <span class="hljs-keyword">const</span> gmtDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(unixTimestamp * <span class="hljs-number">1000</span>);<br />    <span class="hljs-keyword">const</span> localeDateTime = gmtDate.toLocaleString();<br />  },<br />});<br /></code></pre>
</span></div></div><div id="tab-group-165-content-167" class="tab-pane" data-group="group_165" tabindex="-1"><div><span><pre><code class="hljs css language-swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">client</span><span class="hljs-params">(<span class="hljs-number">_</span> client: PubNub, didReceiveMessage message: PNMessageResult)</span></span> {<br />  <span class="hljs-keyword">let</span> unixTimestamp = <span class="hljs-type">Double</span>(message.data.timetoken.uint64Value / <span class="hljs-number">10000000</span>)<br />  <span class="hljs-keyword">let</span> gmtDate = <span class="hljs-type">Date</span>.<span class="hljs-keyword">init</span>(timeIntervalSince1970: unixTimestamp)<br />  <span class="hljs-keyword">let</span> dateFormatter = <span class="hljs-type">DateFormatter</span>()<br />  dateFormatter.dateFormat = <span class="hljs-string">"yyyy-MM-dd'T'HH:mm:ssZZZZZ"</span><br />  <span class="hljs-keyword">let</span> localeDateTime: <span class="hljs-type">String</span> = dateFormatter.string(from: gmtDate)<br />}<br /></code></pre>
</span></div></div><div id="tab-group-165-content-168" class="tab-pane" data-group="group_165" tabindex="-1"><div><span><pre><code class="hljs css language-java"><span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> need a sample here</span><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="updating-messages"></a><a href="#updating-messages" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Updating messages</h2>
<blockquote>
<p><strong>This is a low priority item for phase 1</strong></p>
</blockquote>
<p>Since PubNub stores all messages in a time series, and doesn’t expose the functionality to update messages. You need a simple pattern to implement this functionality.</p>
<p>You can send a new version of the message on the same channel just like a normal publish. The subsequent messages must include the <code>timetoken</code> of the original message, and to simplify rendering, the updated messages should contain the full content so that the original is not needed.</p>
<p>In the client side logic, for displaying these messages you need to be able to update the content for an existing message rather than display it as a new message.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-169-tab-170" class="nav-link active" data-group="group_169" data-tab="tab-group-169-content-170">JavaScript</div><div id="tab-group-169-tab-171" class="nav-link" data-group="group_169" data-tab="tab-group-169-content-171">Swift</div><div id="tab-group-169-tab-172" class="nav-link" data-group="group_169" data-tab="tab-group-169-content-172">Java</div></div><div class="tab-content"><div id="tab-group-169-content-170" class="tab-pane active" data-group="group_169" tabindex="-1"><div><span><pre><code class="hljs css language-js">pubnub.publish({<br />  <span class="hljs-attr">message</span>: {<br />    <span class="hljs-attr">senderId</span>: <span class="hljs-string">'user123'</span>,<br />    <span class="hljs-attr">text</span>: <span class="hljs-string">'Hello, hoomans!'</span>,<br />  },<br />  <span class="hljs-attr">channel</span>: <span class="hljs-string">'room-1'</span>,<br />}, (status, response) =&gt; {<br />  <span class="hljs-comment">// handle status, response</span><br />});  <br /><br />pubnub.publish({<br />  <span class="hljs-attr">channel</span>: <span class="hljs-string">'room-1'</span>,<br />  <span class="hljs-attr">message</span>: {<br />    <span class="hljs-attr">timetoken</span>: <span class="hljs-string">'15343325214676133'</span>, <span class="hljs-comment">// original message timetoken</span><br />    senderId: <span class="hljs-string">'user123'</span>,<br />    <span class="hljs-attr">text</span>: <span class="hljs-string">'Fixed. I had a typo earlier...'</span>,<br />  },<br />}, (status, response) =&gt; {<br />  <span class="hljs-comment">// handle status, response</span><br />});<br /></code></pre>
</span></div></div><div id="tab-group-169-content-171" class="tab-pane" data-group="group_169" tabindex="-1"><div><span><pre><code class="hljs css language-swift">pubnub.publish()<br />  .message([<br />    <span class="hljs-string">"senderId"</span>: <span class="hljs-string">"user123"</span>,<br />    <span class="hljs-string">"title"</span>: <span class="hljs-string">"Hello, hoomans!"</span><br />    ])<br />  .channel(<span class="hljs-string">"room-1"</span>)<br />  .performWithCompletion({ status <span class="hljs-keyword">in</span><br />    <span class="hljs-comment">// handle status</span><br />  })  <br /><br />pubnub.publish()<br />  .channel(<span class="hljs-string">"room-1"</span>)<br />  .message([<br />    timetoken: '<span class="hljs-number">15343325214676133</span>', <span class="hljs-comment">// original message timetoken</span><br />    <span class="hljs-string">"senderId"</span>: <span class="hljs-string">"user123"</span>,<br />    <span class="hljs-string">"text"</span>: <span class="hljs-string">"Fixed. I had a typo earlier..."</span><br />  ])<br />  .performWithCompletion({ status <span class="hljs-keyword">in</span><br />    <span class="hljs-comment">// handle status</span><br />  })<br /></code></pre>
</span></div></div><div id="tab-group-169-content-172" class="tab-pane" data-group="group_169" tabindex="-1"><div><span><pre><code class="hljs css language-java"><span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> need a sample here</span><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="sending-announcements-to-all-users"></a><a href="#sending-announcements-to-all-users" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sending announcements to all users</h2>
<blockquote>
<p><strong>This is a medium priority item for phase 1</strong></p>
</blockquote>
<p>You can send announcements to all users or a limited set of users in your application by using a channel that the announcer has read/write access to and all other users have read-only access to.</p>
<p>Once you have the channel setup, any messages sent on the channel can be displayed as announcements. Other users can subscribe to the channel to receive announcements but cannot send messages on the same channel.</p>
<blockquote>
<p>Refer to <a href="authorization#granting-read-write-access-for-users">Granting read/write access for users</a>.</p>
</blockquote>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-173-tab-174" class="nav-link active" data-group="group_173" data-tab="tab-group-173-content-174">JavaScript</div><div id="tab-group-173-tab-175" class="nav-link" data-group="group_173" data-tab="tab-group-173-content-175">Swift</div><div id="tab-group-173-tab-176" class="nav-link" data-group="group_173" data-tab="tab-group-173-content-176">Java</div></div><div class="tab-content"><div id="tab-group-173-content-174" class="tab-pane active" data-group="group_173" tabindex="-1"><div><span><pre><code class="hljs css language-js">pubnub.publish({<br />  <span class="hljs-attr">message</span>: {<br />    <span class="hljs-attr">senderId</span>: <span class="hljs-string">'user123'</span>,<br />    <span class="hljs-attr">text</span>: <span class="hljs-string">'Hello, this is an announcement'</span>,<br />  },<br />  <span class="hljs-attr">channel</span>: <span class="hljs-string">'room-1'</span>,<br />}, (status, response) =&gt; {<br />  <span class="hljs-comment">// handle status, response</span><br />});<br /></code></pre>
</span></div></div><div id="tab-group-173-content-175" class="tab-pane" data-group="group_173" tabindex="-1"><div><span><pre><code class="hljs css language-swift">pubnub.publish()<br />  .message([<br />    <span class="hljs-string">"senderId"</span>: <span class="hljs-string">"user123"</span>,<br />    <span class="hljs-string">"text"</span>: <span class="hljs-string">"Hello, this is an announcement"</span><br />  ])<br />  .channel(<span class="hljs-string">"room-1"</span>)<br />  .performWithCompletion({ status <span class="hljs-keyword">in</span><br />    <span class="hljs-comment">// handle status</span><br />  })<br /></code></pre>
</span></div></div><div id="tab-group-173-content-176" class="tab-pane" data-group="group_173" tabindex="-1"><div><span><pre><code class="hljs css language-java"><span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> need a sample here</span><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="phase-2-sending-read-receipts"></a><a href="#phase-2-sending-read-receipts" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PHASE 2: Sending read receipts</h2>
<p><a href="https://github.com/pubnub/pubnub-design-patterns/blob/master/_posts/2017-04-19-Read-Receipts.md">Reference: read receipts blog post</a></p>
<p><a href="https://www.pubnub.com/docs/web-javascript/single-multichannel-message-state">Reference: single &amp; multichannel message state</a></p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-177-tab-178" class="nav-link active" data-group="group_177" data-tab="tab-group-177-content-178">JavaScript</div><div id="tab-group-177-tab-179" class="nav-link" data-group="group_177" data-tab="tab-group-177-content-179">Swift</div><div id="tab-group-177-tab-180" class="nav-link" data-group="group_177" data-tab="tab-group-177-content-180">Java</div></div><div class="tab-content"><div id="tab-group-177-content-178" class="tab-pane active" data-group="group_177" tabindex="-1"><div><span><pre><code class="hljs css language-js"><br /></code></pre>
</span></div></div><div id="tab-group-177-content-179" class="tab-pane" data-group="group_177" tabindex="-1"><div><span><pre><code class="hljs css language-swift"><br /></code></pre>
</span></div></div><div id="tab-group-177-content-180" class="tab-pane" data-group="group_177" tabindex="-1"><div><span><pre><code class="hljs css language-java"><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="phase-2-sending-reactions-on-messages"></a><a href="#phase-2-sending-reactions-on-messages" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PHASE 2: Sending reactions on messages</h2>
<p><a href="https://www.pubnub.com/docs/web-javascript/message-metadata">Reference: Message Metadata</a></p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-181-tab-182" class="nav-link active" data-group="group_181" data-tab="tab-group-181-content-182">JavaScript</div><div id="tab-group-181-tab-183" class="nav-link" data-group="group_181" data-tab="tab-group-181-content-183">Swift</div><div id="tab-group-181-tab-184" class="nav-link" data-group="group_181" data-tab="tab-group-181-content-184">Java</div></div><div class="tab-content"><div id="tab-group-181-content-182" class="tab-pane active" data-group="group_181" tabindex="-1"><div><span><pre><code class="hljs css language-js"><br /></code></pre>
</span></div></div><div id="tab-group-181-content-183" class="tab-pane" data-group="group_181" tabindex="-1"><div><span><pre><code class="hljs css language-swift"><br /></code></pre>
</span></div></div><div id="tab-group-181-content-184" class="tab-pane" data-group="group_181" tabindex="-1"><div><span><pre><code class="hljs css language-java"><br /></code></pre>
</span></div></div></div></div>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/chatengine/docs/concepts/channels"><span class="arrow-prev">← </span><span>Manage Channels</span></a><a class="docs-next button" href="/chatengine/docs/concepts/message-history"><span>Message History</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#sending-messages">Sending messages</a></li><li><a href="#receiving-messages">Receiving messages</a></li><li><a href="#sending-images-and-files">Sending images and files</a></li><li><a href="#sending-typing-indicators">Sending typing indicators</a></li><li><a href="#showing-timestamp-in-the-message">Showing timestamp in the message</a></li><li><a href="#updating-messages">Updating messages</a></li><li><a href="#sending-announcements-to-all-users">Sending announcements to all users</a></li><li><a href="#phase-2-sending-read-receipts">PHASE 2: Sending read receipts</a></li><li><a href="#phase-2-sending-reactions-on-messages">PHASE 2: Sending reactions on messages</a></li></ul></nav></div><footer id="footer" class="footer-section"><div id="footer-top"><div class="grey footer-top "><div class="container"><div class="row"><div class="footer-col-1 foot-col"><h4 class="footer-title">Solutions</h4><ul class=" footer-menu-list"><li><a title="ChatEngine" href="https://www.pubnub.com/products/chatengine/">ChatEngine<mark class="tm-mark">™</mark></a></li><li><a title="Project EON" href="https://www.pubnub.com/developers/eon/">Project EON</a></li><li><a title="Chat " href="https://www.pubnub.com/solutions/chat/">Chat </a></li><li><a title="IoT Device Control" href="https://www.pubnub.com/solutions/iot/">IoT Device Control</a></li><li><a title="Realtime Updates" href="https://www.pubnub.com/solutions/realtime-updates/">Realtime Updates</a></li><li><a title="Collaboration" href="https://www.pubnub.com/solutions/collaboration/">Collaboration </a></li><li><a title="Multiplayer Gaming" href="https://www.pubnub.com/solutions/multiplayer-games/">Multiplayer Gaming</a></li><li><a title="Healthcare" href="https://www.pubnub.com/solutions/healthcare/">Healthcare</a></li><li><a title="Cryptocurrency" href="https://www.pubnub.com/solutions/cryptocurrency/">Cryptocurrency</a></li><li><a title="WebRTC and VoIP Signaling" href="https://www.pubnub.com/solutions/webrtc-and-voip-signaling/">WebRTC and VoIP Signaling</a></li><li><a title="Customer Case Studies" href="https://www.pubnub.com/customers/">Customer Case Studies</a></li></ul></div><div class="footer-col-2 foot-col"><h4 class="footer-title">Features</h4><ul class="footer-menu-list"><li><a title="Data Stream Network" href="https://www.pubnub.com/products/global-data-stream-network/">Data Stream Network</a></li><li><a title="Realtime Messaging" href="https://www.pubnub.com/products/realtime-messaging/">Realtime Messaging</a></li><li><a title="Device &amp; User Presence" href="https://www.pubnub.com/products/presence/">Device &amp; User Presence</a></li><li><a title="PubNub Functions" href="https://www.pubnub.com/products/functions/">PubNub Functions</a></li><li><a title="Security &amp; Compliance" href="https://www.pubnub.com/products/security-overview/">Security &amp; Compliance</a></li><li><a title="GDPR Resource Center" href="https://www.pubnub.com/products/security/gdpr/">GDPR Resource Center</a></li><li><a title="Mobile Push Notifications" href="https://www.pubnub.com/products/mobile-push-notifications/"> Mobile Push Notifications</a></li><li><a title="Product Feature Updates" href="https://www.pubnub.com/docs/feature-updates">Product Feature Updates</a></li></ul></div><div class="footer-col-3 foot-col"><h4 class="footer-title">Developers</h4><ul class="footer-menu-list"><li><a title="70+ SDKs and Full Documentation" href="https://www.pubnub.com/docs">70+ SDKs and Full Documentation</a></li><li><a title="How PubNub Works" href="https://www.pubnub.com/developers/tech/how-pubnub-works/">How PubNub Works</a></li><li><a title="Quickstarts" href="https://www.pubnub.com/docs/getting-started-guides/pubnub-publish-subscribe">Quickstarts</a></li><li><a title="Tutorials &amp; Webinars" href="https://www.pubnub.com/developers/training/">Tutorials &amp; Webinars</a></li><li><a title="Dev Console" href="https://www.pubnub.com/docs/console">Dev Console</a></li><li><a title="Realtime Demo Applications" href="https://www.pubnub.com/developers/demos/">Realtime Demo Applications</a></li><li><a title="Realtime Data Streams Examples" href="https://www.pubnub.com/developers/realtime-data-streams/">Realtime Data Streams Examples</a></li></ul></div><div class="footer-col-4 foot-col"><h4 class="footer-title">Support</h4><ul class="footer-menu-list"><li><a title="Help &amp; Support" href="https://support.pubnub.com/support/home">Help &amp; Support</a></li><li><a title="Resource Center" href="https://www.pubnub.com/learn/resources/">Resource Center</a></li><li><a title="Knowledge Base" href="https://support.pubnub.com/support/solutions">Knowledge Base</a></li><li><a title="Glossary" href="https://www.pubnub.com/learn/glossary/">Glossary</a></li><li><a title="Professional Services" href="https://www.pubnub.com/services/professional-services/">Professional Services</a></li><li><a title="Network Status" target="_blank" rel="noopener" href="http://status.pubnub.com/">Network Status</a></li></ul> <a href="https://www.pubnub.com/schedule-a-demo/" title="Schedule a Demo" class="button-widget schedule-demo-footer">Schedule a Demo</a></div></div></div></div><div class="white  footer-top"><div class="container"><div class="row"><div class="foot-col"><a href="https://www.pubnub.com/" title="PubNub secure global data stream network and easy to use API for realtime Apps" class="footer-logo"></a></div><div class="foot-col"><ul class=" footer-menu-list"><li><a title="About PubNub" href="https://www.pubnub.com/company/">About PubNub</a></li><li><a title="Leadership" href="https://www.pubnub.com/company/leadership/">Leadership</a></li><li><a title="Careers" href="https://www.pubnub.com/company/careers/">Careers</a></li><li><a title="PubNub Ambassador" href="https://www.pubnub.com/pubnub-ambassador/">PubNub Ambassador</a></li></ul></div><div class="foot-col"><ul class=" footer-menu-list"><li><a title="Blog" href="https://www.pubnub.com/blog/">Blog</a></li><li><a title="Events" href="https://www.pubnub.com/company/events/">Events</a></li><li><a title="News Coverage" href="https://www.pubnub.com/company/news-coverage/">News Coverage</a></li><li><a title="Press Releases" href="https://www.pubnub.com/company/press-releases/">Press Releases</a></li></ul></div><div class="foot-col"><ul class=" footer-menu-list"><li><a title="Partnerships" href="https://www.pubnub.com/partners/">Partnerships</a></li><li><a title="Contact PubNub" href="https://www.pubnub.com/company/contact-us/">Contact PubNub</a></li><li><a title="Privacy Policy" href="https://www.pubnub.com/privacy-policy/">Privacy Policy</a></li><li><a title="Terms and Conditions" href="https://www.pubnub.com/terms-and-conditions/">Terms and Conditions</a></li></ul></div></div></div></div></div><div id="footer-bottom" class="footer-bottom"><div class="container"><div class="row  "><div class="bottom-left"><div class="copyright">© 2010 - 2019 PubNub Inc. All Rights Reserved. PUBNUB, ChatEngine, the PUBNUB logo and the ChatEngine logo are trademarks or registered trademarks of PubNub Inc. in the U.S. and other countries as well.</div></div><div class="bottom-right"><div class="social-footer"> <a rel="noopener" href="https://www.facebook.com/PubNub" class="social-link facebook" title="Follow PubNub on FaceBook" target="_blank">FaceBook</a>  <a rel="noopener" href="https://twitter.com/PubNub" class="social-link twitter" title="Follow PubNub on Twitter" target="_blank">Twitter</a><a rel="noopener" href="https://www.linkedin.com/company/pubnub" class="social-link linkedin" title="Follow PubNub on LinkedIn" target="_blank">LinkedIn</a><a rel="noopener" href="https://www.youtube.com/c/PubNub" class="social-link youtube" title="Follow PubNub on YouTube" target="_blank">YouTube</a><a rel="noopener" href="https://vimeo.com/pubnub" class="social-link vimeo" title="Follow PubNub on Vimeo" target="_blank">Vimeo</a></div></div></div></div></div></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '00b03685d9ddabed232cf720f6db94e6',
                indexName: 'dev_CRC',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>